
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Galaxy Testing and Automation</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://quickstarts.postman.com/elements/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="G-GPC8QJXW1D"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="galaxy-testing-and-automation"
                  title="Galaxy Testing and Automation"
                  environment="web"
                  feedback-link="https://github.com/postmanlabs/pmquickstarts">
    
      <google-codelab-step label="Overview" duration="1">
        <aside class="warning"><p> We are retiring the badge awarding system for completion of this training. This training will continue to be available. Please read more <a href="https://community.postman.com/t/important-announcement-badge-submissions-have-ended/64887" target="_blank">here</a>.</p>
</aside>
<p>This is an introduction to testing and automation in Postman. Complete this entire course to equip yourself with necessary skills needed to test and automate APIs in Postman.</p>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>A Postman account</li>
</ul>
<h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul class="checklist">
<li>Writing scripts to test your response data</li>
<li>Passing data between requests using variables</li>
<li>Validating responses against schema</li>
<li>Defining control flow</li>
<li>Automating your testing using dynamic faker data and the collection runner</li>
<li>Running collections with scheduled runs and monitors</li>
</ul>
<h2 is-upgraded>What You&#39;ll Build</h2>
<ul>
<li>A Postman Collection consisting of requests, variables, and tests.</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Fork the collection" duration="1">
        <h2 is-upgraded>Welcome to Testing and Automation training! üïµÔ∏èüîç</h2>
<p>FORK the following collection to create a copy in your own workspace.</p>
<p><a href="https://god.gw.postman.com/run-collection/9065401-7450715a-4607-4648-9fe9-9f0a481072c5?action=collection%2Ffork&collection-url=entityId%3D9065401-7450715a-4607-4648-9fe9-9f0a481072c5%26entityType%3Dcollection%26workspaceId%3D13009b3b-31e2-4048-b3c5-de29cf9a0270" target="_blank"><img alt="Run in Postman" src="img/512b3ab5f8f0d855.svg"></a></p>
<aside class="warning"><p> Once you fork the collection to your own workspace, you can complete the rest of the course solely in Postman. The collection contains this documentation as well as other details in the code comments. Or you can optionally refer to this quickstart throughout the remainder of this lesson as you continue working in Postman.</p>
</aside>
<p>The collection will walk you through writing scripts to test your response data in Postman, passing data between requests using variables, validating responses against schema, as well as automating your testing using dynamic faker data and the collection runner, defining control flow, and running collections on the command line with Newman.</p>
<p>This collection uses a mock API with a few demo endpoints that return order data. We will use these endpoints to model a typical workflow so that you can go on to apply what you&#39;ve learned when you&#39;re working with real-world APIs.</p>
<p>In the next section, we&#39;ll send our first request.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Send the first request!" duration="5">
        <p>Open the first request, check out the docs on the right, and <strong>Send</strong>! The first request returns a JSON response structured like this:</p>
<pre><code language="language-json" class="language-json">{
  &#34;orderReference&#34;: &#34;773a6237-d84f-45e6-bc30-67206345a8a4&#34;
}
</code></pre>
<h2 is-upgraded>Writing scripts &amp; tests</h2>
<p>Open the <strong>Tests</strong> for this request. We are primarily going to be working in this tab for each request. The <strong>Tests</strong> script is where you write JavaScript to execute <em>when your request response is received</em>.</p>
<aside class="warning"><p> ‚úèÔ∏è When you have the docs view open Postman will condense the UI for the request builder in the center, so you may need to use the drop-down lists to select <strong>Tests</strong> and <strong>Test Results</strong> in the request and response areas.</p>
</aside>
<p>You can also write <strong>Pre-request Scripts</strong> to execute before a request is sent, and can add scripts to collections and folders‚Äìthese will execute for every request contained inside.</p>
<aside class="warning"><p> ‚úèÔ∏è Notice that the address for this request starts with a base URL which is stored in a variable that you imported as part of the collection. Hover over the var (surrounded by curly braces) in the address to see the value. We set this mock server up in advance‚Äìyou can create your own mocks and they will return whatever you have defined in the <strong>examples</strong> for a request.</p>
</aside>
<h2 is-upgraded>Step 1: Parse the response JSON</h2>
<p>The <strong>Tests</strong> tab contains some comments indicating the different tests and other processing we&#39;re going to add during the session. Let&#39;s handle the first one‚Äìwe&#39;re going to need the response JSON data pulled into the script in a way that we can process, so save it as a variable:</p>
<pre><code language="language-js" class="language-js">const response = pm.response.json();
</code></pre>
<p>Let&#39;s write this out to the console to verify we have it (you can also use <code>console.log</code>, <code>console.warn</code>, and <code>console.error</code>):</p>
<pre><code language="language-js" class="language-js">console.info(response);
</code></pre>
<p>Try sending the request and checking the console!</p>
<h2 is-upgraded>Step 2: Set a variable with a response value</h2>
<p>Before we move on let&#39;s save data from the response to a variable so that we can use it in another request. We&#39;ll use the response JSON variable we created in JS and store the <code>orderReference</code> property as a global Postman variable (which is scoped to the workspace you&#39;re in):</p>
<pre><code language="language-js" class="language-js">pm.globals.set(&#34;orderRef&#34;, response.orderReference);
</code></pre>
<p>You can retrieve the global variables in your code using <code>pm.globals.get</code>.</p>
<p><strong>Send</strong> the request again and check the global variables via the little eye button at the top right‚Äìthe <code>orderRef</code> var should now have a value (and we can access it in other requests).</p>
<h2 is-upgraded>Step 3: Add a test</h2>
<p>Now let&#39;s add a basic test to check we have a success status code of <code>200 OK</code>‚Äìthe test name string will be output with the test result, so make sure yours are meaningful enough to be useful when you&#39;re testing (you can either copy this or grab it from the snippets to the right of the <strong>Tests</strong> input):</p>
<pre><code language="language-js" class="language-js">pm.test(&#34;Status code is 200&#34;, () =&gt; {
  //test syntax uses chai.js
  pm.response.to.have.status(200);
});
</code></pre>
<p>With your test code added, <strong>Send</strong> and check out the <strong>Test Results</strong>. Then try making the test fail by changing the <code>200</code> to <code>400</code>‚Äìnotice that the result includes extra info indicating why the test failed.</p>
<h2 is-upgraded>Step 4: Test a response property</h2>
<p>Let&#39;s do a test that digs into a bit more detail next‚Äìwe&#39;ll check that the response contains a particular property, and that it is a string. We can add both assertions to the same test and if any one fails the whole test will fail.</p>
<pre><code language="language-js" class="language-js">pm.test(&#34;orderReference exists&#34;, () =&gt; {
  //property is in the response received
  pm.expect(response).to.have.property(&#34;orderReference&#34;);
  //property is a string
  pm.expect(response.orderReference).to.be.a(&#34;string&#34;);
});
</code></pre>
<p><strong>Send</strong> and check out the <strong>Test Results</strong>.</p>
<aside class="warning"><p> ‚úèÔ∏è Try changing <code>string</code> to <code>number</code> to see the test fail.</p>
</aside>
<p><strong>Save</strong> this request, then open the next request <code>Get product code</code>, open its docs to the right, and <strong>Send</strong> it.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Retrieve all products! üì±üõí" duration="5">
        <p><strong>Send the request and read on here.</strong></p>
<p>This request returns an array of products‚Äìwe&#39;re going to script some processing on the array, filtering to find a particular item, and saving the <code>sku</code> (a product code) data to the global variables.</p>
<p>The request you sent to the API received a JSON response that looked something like this (depending on the parameter you sent):</p>
<pre><code language="language-json" class="language-json">results&#34;: [
    {
        &#34;name&#34;: &#34;iPhone 12 Pro Blue&#34;,
        &#34;sku&#34;: &#34;2020/Iph/12/Blu&#34;,
        &#34;color&#34;: &#34;blue&#34;
    },
    {
        &#34;name&#34;: &#34;iPhone 12 Pro Red&#34;,
        &#34;sku&#34;: &#34;2020/Iph/12/Red&#34;,
        &#34;color&#34;: &#34;red&#34;
    },
    {
        &#34;name&#34;: &#34;Samsung Galaxy S&#34;,
        &#34;sku&#34;: &#34;2020/Sam/GS/Blu&#34;,
        &#34;color&#34;: &#34;gray&#34;
    },
    {
        &#34;name&#34;: &#34;Samsung Galaxy Note20 Ultra&#34;,
        &#34;sku&#34;: &#34;2020/Sam/GN20/Red&#34;,
        &#34;color&#34;: &#34;red&#34;
    },
    {
        &#34;name&#34;: &#34;Samsung Galaxy S20+&#34;,
        &#34;sku&#34;: &#34;2020/Sam/SGS20P/Magenta&#34;,
        &#34;color&#34;: &#34;red&#34;
    }
]
</code></pre>
<aside class="warning"><p> ‚úèÔ∏è The request accepts a query parameter indicating the product name‚Äìyou can experiment by checking and unchecking it to see the difference in what it returns.</p>
</aside>
<h2 is-upgraded>Step 1: Get the array</h2>
<p>In the <strong>Tests</strong> tab you&#39;ll see comments again for each step. First get the response array in a variable and write the length out to the console‚Äì<strong>Send</strong> and check the console:</p>
<pre><code language="language-js" class="language-js">const phones = pm.response.json().results;
console.info(&#34;Phones returned: &#34; + phones.length);
</code></pre>
<h2 is-upgraded>Step 2: Find a product</h2>
<p>Let&#39;s filter the array to find a product with a particular property. We&#39;ll filter based on the <code>color</code> property and just use the first valid result (feel free to also add a console statement to see what&#39;s in the variable):</p>
<pre><code language="language-js" class="language-js">const redPhone = phones.filter((phone) =&gt; phone.color === &#34;red&#34;)[0];
</code></pre>
<h2 is-upgraded>‚úÖ Assignment 1</h2>
<aside class="warning"><p> Throughout the session you will encounter assignments to complete independently, and so these will not include full instructions‚Äìif you need help pop a question in the Q&amp;A or use the Postman forum if the session has ended.</p>
</aside>
<p>Save the <code>sku</code> property of the first red iPhone you can find to a global Postman variable.</p>
<p>You will be able to use the SKU in the request body of the <code>3. Send order</code> request instead of the hardcoded value.</p>
<h2 is-upgraded>Step 3: Test the filtered object</h2>
<p>Let&#39;s have a look at a basic structure of a test:</p>
<pre><code language="language-js" class="language-js">pm.test(&#34;Some test&#34;, () =&gt; {
  pm.expect(1).to.eql(2);
});
</code></pre>
<p>Now that you have a single item from the response filtered, add a test to check that it is a JSON object, and that it contains property with a particular value (‚Äòred&#39;):</p>
<pre><code language="language-js" class="language-js">pm.test(&#34;Phone found&#34;, () =&gt; {
  pm.expect(redPhone.color).to.eql(&#34;red&#34;);
  pm.expect(redPhone).to.be.an(&#34;object&#34;);
});
</code></pre>
<p><strong>Send</strong> and check out the <strong>Test Results</strong>. Try making it fail too, e.g. by changing the color text value from <code>red</code> to <code>blue</code>.</p>
<p><strong>Save</strong> this request. Open the next request <code>3. Send order</code>, check out the docs, and <strong>Send</strong>.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Create a new order! üí≥üì¶" duration="5">
        <p><strong>Send the request and read on here.</strong></p>
<p>This request sends an object representing the new order to create, and returns an order confirmation. We are going to use dynamic data in the request body, carry out some preprocessing before the request runs, and test the response.</p>
<p>The request returns JSON with the following structure:</p>
<pre><code language="language-json" class="language-json">{
    &#34;created&#34;: true,
    &#34;orderId&#34;: &#123;&#123;$timestamp}}
}
</code></pre>
<p>Take a look in the request <strong>Body</strong> to see the JSON data we&#39;re sending to create an order. It should look something like this:</p>
<pre><code language="language-json" class="language-json">{
  &#34;orderRef&#34;: &#34;f7032ebd-9ed2-4010-aab2-d7672f68e070&#34;,
  &#34;customer&#34;: &#34;Acme Inc&#34;,
  &#34;sku&#34;: &#34;2020/Iph/12/Blu&#34;,
  &#34;deliveryDate&#34;: &#34;2021-01-15&#34;
}
</code></pre>
<p>Remember that in your assignment for the last request, you saved an SKU to a variable‚Äìnow you can set the <strong>Body </strong><code>sku</code> in this request to use the variable instead of the hardcoded value.</p>
<p>Tip: You can enter a variable reference between the quotes in the body just like you do in the Postman request UI fields.</p>
<h2 is-upgraded>‚úÖ Assignment 2</h2>
<p>Your next assignment is to parse the response body of this request.</p>
<p>Set a global variable with the value of the property <code>orderId</code> from the response, so that we can reference it in another request.</p>
<p><strong>Send</strong> the request and check the global variable values using the eye button‚Äì<strong>Save</strong> this request.</p>
<p>You will be able to use the variable in the next request <code>4. Get order</code>, as a path parameter instead of the hardcoded value.</p>
<h2 is-upgraded>Step 1: Send dynamic data</h2>
<p>When you send data to an API in Postman, you can generate values when the request runs using dynamic variables. Edit the value of the <strong>Body</strong> data <code>customer</code> property to send a random company name‚Äìinside the quotes, start typing <code>&#123;&#123;$</code> to see the available dynamic variables. Choose <code>randomCompanyName</code>‚Äìthe reference is exactly like any other variable but with the <code>$</code> character at the start, like this: <code>&#123;&#123;$randomThing}}</code></p>
<p><strong>Send</strong> the request a few times, checking the <strong>Console</strong> to see what Postman sent each time (open the <code>POST</code> request entry &gt; <strong>Request Body</strong> to see the JSON).</p>
<h2 is-upgraded>Step 2: Preset a value</h2>
<p>For the <code>deliveryDate</code>, we&#39;re going to calculate a date before the request sends, and set it to the var so that the request sends it. In <strong>Pre-request Script</strong>, add the following processing to calculate a date, setting it for two weeks from today, then saving it to a variable:</p>
<pre><code language="language-js" class="language-js">const deliveryDate = new Date();
deliveryDate.setDate(deliveryDate.getDate() + 14);
console.log(deliveryDate.toISOString().substr(0, 10));
pm.globals.set(&#34;deliveryDate&#34;, deliveryDate.toISOString().substr(0, 10));
</code></pre>
<p><strong>Send</strong> the request, then check out the <strong>Request Body</strong> in the <strong>Console</strong> again, and take a look at the variable values via the eye button.</p>
<h2 is-upgraded>‚úÖ Assignment 3</h2>
<p>For this request we&#39;re expecting a <code>201 Created</code> status code. For your next assignment, add a test that verifies the status code of the response.</p>
<h2 is-upgraded>‚úÖ Assignment 4</h2>
<p>For your final assignment, test that the response includes confirmation of the order success‚Äìin the <code>created</code> and <code>orderId</code> properties (one should be true, and the other should be a number).</p>
<p><strong>Send</strong> and check the <strong>Test Results</strong>‚Äì<em>as always, make your test fail also!</em> ‚ö†Ô∏è</p>
<p><strong>Save</strong> your request and open the next one <code>4. Get order</code>.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Retrieve the order! üõçÔ∏èüéÅ" duration="5">
        <p><strong>Send the request and read on here.</strong></p>
<p>This request retrieves the order sent by the <code>POST</code> request. This time we&#39;re going to test that the response validates against a schema, then automate our tests using the collection runner.</p>
<p>The request returns JSON with the following structure:</p>
<pre><code language="language-json" class="language-json">{
    &#34;orderId&#34;: &#123;&#123;orderId}},
    &#34;customer&#34;: &#34;Acme Inc&#34;,
    &#34;sku&#34;: &#34;2020/Iph/12/Red&#34;
}
</code></pre>
<p>We&#39;re going to specify a schema to validate the response JSON against. The schema will be defined as a JSON object inside the script, and will match the response structure above‚Äìwe will write a script to check that the response has the same structure and properties.</p>
<aside class="warning"><p> ‚úèÔ∏è You can also validate your responses against an API specification, for example, defined as an OpenAPI spec in <strong>APIs</strong> on the left of Postman.</p>
</aside>
<p>‚úÖ Remember that one of your assignments in the previous request was to save the order variable from the response‚Äì<strong>now alter the value you&#39;re sending to the path parameter here to use the variable instead of the hard-coded value</strong>.</p>
<h2 is-upgraded>Step 1: Define the schema</h2>
<p>In <strong>Tests</strong>, create an object to represent the schema we expect the order data to match:</p>
<pre><code language="language-js" class="language-js">const schema = {
  type: &#34;object&#34;,
  properties: {
    orderId: {
      type: &#34;number&#34;,
    },
    customer: {
      type: &#34;string&#34;,
    },
    sku: {
      type: &#34;string&#34;,
    },
  },
  required: [&#34;orderId&#34;, &#34;customer&#34;, &#34;sku&#34;],
};
</code></pre>
<h2 is-upgraded>Step 2: Validate response against schema</h2>
<p>Now add code to check the response against the schema (we use <code>expect</code> again but this time with <code>jsonSchema</code>):</p>
<pre><code language="language-js" class="language-js">const response = pm.response.json();
pm.test(&#34;Schema is valid&#34;, () =&gt; {
  pm.expect(response).to.have.jsonSchema(schema);
});
</code></pre>
<p><strong>Send</strong> the request and check the <strong>Test Results</strong>‚Äì<em>remember to also make sure it fails e.g. if you change one of the schema </em></p>
<p><em><code>type</code></em></p>
<p><em> values</em>.</p>
<p>Finally let&#39;s check what happens if no order ID is passed to the request. Click the eye button and edit, then delete the value of the <code>orderId</code> variable so that it&#39;s empty, and <strong>Send</strong> again before reading on.</p>
<h2 is-upgraded>No order specified üôà‚õî</h2>
<p>Since you didn&#39;t pass an order ID, you got a <code>404</code> response containing an error message.</p>
<p>The request returns the following <strong>Body</strong> structure when no order is specified:</p>
<pre><code language="language-json" class="language-json">{
  &#34;message&#34;: &#34;Not found!&#34;
}
</code></pre>
<p>We already specified a schema to test successful responses against, but now let&#39;s test the error response against a different schema.</p>
<h2 is-upgraded>Step 3: Define the schema</h2>
<p>In <strong>Tests</strong>, create an object to represent the schema we expect the order data to match:</p>
<pre><code language="language-js" class="language-js">const errorSchema = {
  properties: {
    message: {
      type: &#34;string&#34;,
    },
  },
};
if (pm.response.code === 404)
  pm.test(&#34;Error response is valid&#34;, () =&gt; {
    pm.expect(response).to.have.jsonSchema(errorSchema);
  });
</code></pre>
<p><strong>Send</strong> the request and check out the <strong>Test Results</strong>‚Äì<em>and you know the drill by now, edit your test code to make sure it fails!</em></p>
<p>This isn&#39;t the most efficient test code we could use because we&#39;ve just tacked on the error schema test at the end‚Äìyou could restructure the code in a more sensible way, but for now add a conditional before the test on the successful schema:</p>
<pre><code language="language-js" class="language-js">if(pm.response.code===200)
</code></pre>
<h2 is-upgraded>Step 4: Automate your test runs</h2>
<p>We&#39;ve carried out processing on individual requests and saved data so that we can pass values between requests‚Äìbut we can do much more to automate our testing.</p>
<p>When you use the Postman Collection Runner, you can run the requests in a sequence and add logic to your scripts to control the flow of execution.</p>
<p>In the <strong>Tests</strong> for the <code>4. Get order</code> request, add this code to end execution after this request, which will mean that the runner stops here.</p>
<pre><code language="language-js" class="language-js">postman.setNextRequest(null);
</code></pre>
<p>You can create loops and conditional workflows by passing the request name as a string to the <code>setNextRequest</code> method.</p>
<p><strong>Save</strong> the request, then open the collection overview by selecting it on the left‚Äìhit <strong>Run</strong>. Run the collection with the default options to see the requests execute in sequence.</p>
<p>Take a look at the runner output and remember how the requests are saving response data that subsequent requests use‚Äìthis way we can pass data between requests. Click the requests in the runner output display to drill down into detail about what was sent.</p>
<h2 is-upgraded>Step 5: Monitor your collections</h2>
<p>You can set collection runs up to happen on a schedule using <strong>Monitors</strong>. Open <strong>Monitors</strong> on the left, and create a new one. Give your monitor a name, select the collection, and choose a frequency. You will receive automated updates on any fails in your monitoring runs and can also access them inside Postman. <em>Note that it may take some time for results to appear.</em></p>
<p><strong>Open the final request &#34;Complete training&#34; and check out the docs for instructions!</strong></p>


      </google-codelab-step>
    
      <google-codelab-step label="Next Steps" duration="1">
        <h2 class="checklist" is-upgraded>What we&#39;ve covered</h2>
<p>We&#39;ve been able to cover the following:</p>
<ul>
<li>Writing scripts to test your response data</li>
<li>Passing data between requests using variables</li>
<li>Validating responses against schema</li>
<li>Defining control flow</li>
<li>Automating your testing using dynamic faker data and the collection runner</li>
<li>Running collections with scheduled runs and monitors</li>
</ul>
<p>If you&#39;ve completed all the steps, you should have a Postman Collection consisting of requests, variables, and tests in your workspace.</p>
<p>If you want to learn more about testing and automation in Postman, check out the following resources. The sky is the limit!</p>
<h2 is-upgraded>Additional Resources</h2>
<ul>
<li>Postman Webinar: <a href="https://youtu.be/sB2HHrezQOo" target="_blank">Continuous Testing with Postman</a> video recording</li>
<li>Postman Webinar: <a href="https://youtu.be/zrmQAgixMpU" target="_blank">Continuous Quality with Postman</a> video recording</li>
<li><a href="https://www.postman.com/postman/workspace/test-examples-in-postman/overview" target="_blank">Test examples in Postman</a> workspace</li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://quickstarts.postman.com/elements/codelab-elements/native-shim.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/custom-elements.min.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/prettify.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("2025084205");
  </script>
</body>
</html>
